"use strict";(self.webpackChunkcdd_project=self.webpackChunkcdd_project||[]).push([[487],{9487:(A,c,o)=>{o.r(c),o.d(c,{UserPageModule:()=>_});var l=o(8583),a=o(665),d=o(7957),u=o(6371),m=o(1660),g=o(7709),h=o(6782),e=o(7716),v=o(3071);let f=(()=>{class r{constructor(t,s,i,p){this.userService=t,this.activeModal=s,this.modalService=i,this.formBuider=p,this.onDestroy$=new g.xQ,this.userForm=p.group({email:["",[a.kI.required,a.kI.email]],first_name:["",[a.kI.required]],last_name:["",[a.kI.required]],avatar:["",[a.kI.required]]})}getDataFromForm(){const t={};return t.email=this.userForm.controls.email.value,t.first_name=this.userForm.controls.first_name.value,t.last_name=this.userForm.controls.last_name.value,t.avatar=this.userForm.controls.avatar.value,t}ngOnInit(){this.initForm()}ngOnDestroy(){this.onDestroy$.next(!0),this.onDestroy$.complete()}initForm(){this.userForm.controls.email.setValue(this.user.email),this.userForm.controls.first_name.setValue(this.user.first_name),this.userForm.controls.last_name.setValue(this.user.last_name),this.userForm.controls.avatar.setValue(this.user.avatar)}onDissmis(){this.activeModal.dismiss()}SomeError(t){console.error(t),new m.p(this.modalService).addHeader("Error").addText("Something went wrong").setDangerStyle().openAlertModal()}onSubmit(){const t=Object.assign(Object.assign({},this.user),this.getDataFromForm());this.userService.updateUser(t).pipe((0,h.R)(this.onDestroy$)).subscribe({next:s=>this.activeModal.close(s),error:this.handleError.bind(this)})}handleError(t){new m.p(this.modalService).addHeader("Error updating").addText(`Error updating user ${t.status}. ${JSON.stringify(t)}`).setDangerStyle().openAlertModal()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(v.K),e.Y36(u.Kz),e.Y36(u.FF),e.Y36(a.qu))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-edit-user"]],inputs:{user:"user"},decls:27,vars:2,consts:[[1,"container"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close","btn-close",3,"click"],["aria-hidden","true"],["novalidate","",3,"formGroup","ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","formControlName","email","placeholder","Enter email",1,"form-control"],["for","first_name"],["type","text","id","first_name","formControlName","first_name","placeholder","Enter first_name",1,"form-control"],["for","last_name"],["type","text","id","last_name","formControlName","last_name","placeholder","Enter last_name",1,"form-control"],["for","avatar"],["type","text","id","avatar","formControlName","avatar","placeholder","Enter avatar URL",1,"form-control"],[1,"text-center"],["type","url",1,"btn","btn-primary",3,"disabled"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h4",2),e._uU(3,"Edit User"),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return s.onDissmis()}),e.TgZ(5,"span",4),e._uU(6,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"form",5),e.NdJ("ngSubmit",function(){return s.onSubmit()}),e.TgZ(8,"div",6),e.TgZ(9,"label",7),e._uU(10,"Email address"),e.qZA(),e._UZ(11,"input",8),e.qZA(),e.TgZ(12,"div",6),e.TgZ(13,"label",9),e._uU(14,"First Name"),e.qZA(),e._UZ(15,"input",10),e.qZA(),e.TgZ(16,"div",6),e.TgZ(17,"label",11),e._uU(18,"Last name"),e.qZA(),e._UZ(19,"input",12),e.qZA(),e.TgZ(20,"div",6),e.TgZ(21,"label",13),e._uU(22,"Avatar URL"),e.qZA(),e._UZ(23,"input",14),e.qZA(),e.TgZ(24,"div",15),e.TgZ(25,"button",16),e._uU(26,"Edit"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(7),e.Q6J("formGroup",s.userForm),e.xp6(18),e.Q6J("disabled",s.userForm.invalid))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u],styles:[""]}),r})();function Z(r,n){if(1&r&&(e.TgZ(0,"mark"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.hij("updated ad: ",e.xi3(2,1,t.updatedAt,"dd.MM.YYYY HH:mm"),"")}}function U(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"div"),e._UZ(1,"img",3),e.TgZ(2,"p"),e._uU(3),e._UZ(4,"br"),e._uU(5),e._UZ(6,"br"),e._uU(7),e._UZ(8,"br"),e._uU(9),e._UZ(10,"br"),e._uU(11),e._UZ(12,"br"),e.YNc(13,Z,3,4,"mark",2),e._UZ(14,"br"),e.qZA(),e.TgZ(15,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().editUser()}),e._uU(16,"Edit"),e.qZA(),e.TgZ(17,"a",5),e._uU(18,"To main page"),e.qZA(),e.qZA()}if(2&r){const t=e.oxw();e.xp6(1),e.Q6J("src",t.user.avatar,e.LSH),e.xp6(2),e.hij(" id: ",t.user.id," "),e.xp6(2),e.hij(" email: ",t.user.email," "),e.xp6(2),e.hij(" first name: ",t.user.first_name," "),e.xp6(2),e.hij(" last name: ",t.user.last_name," "),e.xp6(2),e.hij(" avatar: ",t.user.avatar," "),e.xp6(2),e.Q6J("ngIf",t.updatedAt)}}const b=[{path:"",component:(()=>{class r{constructor(t,s,i){this.activatedRoute=t,this.modalService=s,this.cd=i}ngOnInit(){this.activatedRoute.data.subscribe(({user:t})=>{this.user=t})}editUser(){const t=this.modalService.open(f,{size:"md"});t.componentInstance.user=Object.assign({},this.user),this.performResultModal(t)}performResultModal(t){t.closed.subscribe(s=>{this.createSuccesModalAlert({text:`Successful user update. result body: ${JSON.stringify(s)}`}),this.updatedAt=s.updatedAt,this.user=Object.assign(Object.assign({},this.user),s),this.cd.detectChanges()})}createSuccesModalAlert({header:t="Succes",text:s=""}){new m.p(this.modalService).addHeader(t).addText(s).setSuccessStyle().openAlertModal()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(d.gz),e.Y36(u.FF),e.Y36(e.sBO))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-user-page"]],decls:4,vars:1,consts:[[1,"container","w-50"],[1,"text-center"],[4,"ngIf"],["alt","image is not loaded",1,"d-block",2,"height","15rem",3,"src"],[1,"btn","btn-secondary",3,"click"],["routerLink","",1,"ml-3","btn","btn-primary"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h1",1),e._uU(2,"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"),e.qZA(),e.YNc(3,U,19,7,"div",2),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf",s.user))},directives:[l.O5,d.yS],pipes:[l.uU],styles:[""],changeDetection:0}),r})()}];let _=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({providers:[],imports:[[d.Bz.forChild(b),l.ez,a.UX,u.bz]]}),r})()}}]);